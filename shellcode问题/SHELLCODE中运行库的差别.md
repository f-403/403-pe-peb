


### 🧾 C/C++ 运行库链接方式对比表

| 编译选项   | 链接方式         | 依赖 DLL       | 包含运行库  | 是否线程安全 | 调试符号  | 用于 Shellcode | 用于注入  | 常规应用推荐 |
| ------ | ------------ | ------------ | ------ | ------ | ----- | ------------ | ----- | ------ |
| `/MT`  | 静态链接 Release | ❌ 无需         | ✅ 全包含  | ✅ 是    | ❌ 无调试 | ✅ 推荐         | ✅ 可用  | ✅ 可用   |
| `/MTd` | 静态链接 Debug   | ❌ 无需         | ✅ 全包含  | ✅ 是    | ✅ 含调试 | ❌ 太大，勿用      | ❌ 较大  | ✅ 调试   |
| `/MD`  | 动态链接 Release | ✅ 需要 CRT DLL | ❌ 外部依赖 | ✅ 是    | ❌ 无调试 | ❌ 崩溃风险       | ✅ 可用  | ✅ 推荐   |
| `/MDd` | 动态链接 Debug   | ✅ 需要 CRT DLL | ❌ 外部依赖 | ✅ 是    | ✅ 含调试 | ❌ 崩溃风险       | ❌ 体积大 | ✅ 调试   |

---

### 🧠 各字段说明：

| 字段           | 含义                                                 |
| ------------ | -------------------------------------------------- |
| 链接方式         | 编译器如何链接运行时库（静态 or 动态）                              |
| 依赖 DLL       | 是否需要运行时 DLL，如 `ucrtbase.dll`, `vcruntime140.dll` 等 |
| 包含运行库        | 是否把运行库函数（如 `memcpy`、`malloc` 等）打包进最终程序             |
| 是否线程安全       | 是否支持多线程运行（一般全部都是）                                  |
| 调试符号         | 是否包含调试信息（如栈追踪、变量名）                                 |
| 用于 Shellcode | 是否适合用在 Shellcode、注入器等场景                            |
| 用于注入         | 适合注入到远程进程运行？需看依赖                                   |
| 常规应用推荐       | 一般程序开发时推荐使用的选项                                     |

---

### ✅ Shellcode 场景建议：

| 场景                    | 推荐运行库        |
| --------------------- | ------------ |
| 注入远程进程（稳定性高）          | `/MT`        |
| 制作 Shellcode（完全脱离环境）  | `/MT`        |
| 开发调试用 Shellcode（本地测试） | `/MTd`（测试阶段） |
| 普通 GUI/CLI 程序         | `/MD`        |
| 大型应用（需减少体积）           | `/MD`        |

---

### 🚫 `/MD` 不适合 Shellcode 的本质原因：

* 动态库未加载会崩溃（例如 `ucrtbase.dll`）
* 需要运行 CRT 初始化函数，但 shellcode 没有 `_CRTStartup`
* 注入时 DLL 地址不同，可能调用错地址

---


